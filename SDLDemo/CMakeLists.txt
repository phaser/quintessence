cmake_minimum_required (VERSION 2.8)
set (PROJ_NAME "SDLDemo")
set (CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${KRAL_PATH})
project (${PROJ_NAME})
include (KRALMain)

if (OSX)
    set (BUILD_TYPE MACOSX_BUNDLE)
elseif (WIN32)
	set (BUILD_TYPE WIN32)
elseif (IOS)
    set (BUILD_TYPE MACOSX_BUNDLE)
    set_global_target_property(XCODE_ATTRIBUTE_IPHONEOS_DEPLOYMENT_TARGET 5.0) 
endif ()

add_module_dependency(${PROJ_NAME} "SDL2" "2.0.0")
add_module_dependency(${PROJ_NAME} "QUI2D" "dev")
add_module_dependency(${PROJ_NAME} "glm" "0.9.3.3")
add_module_dependency(${PROJ_NAME} "QUIUtils" "dev")
add_module_dependency(${PROJ_NAME} "QUIText" "dev")
add_module_dependency(${PROJ_NAME} "QUIOpenGLES" "dev")
add_module_dependency(${PROJ_NAME} "QUIRenderer" "dev")
add_module_dependency(${PROJ_NAME} "QUIInput" "dev")
add_module_dependency(${PROJ_NAME} "QUIReflection" "dev")
add_module_dependency(${PROJ_NAME} "QUIVirtualFS" "dev")
add_module_dependency(${PROJ_NAME} "QUIResourceLoader" "dev")
add_module_dependency(${PROJ_NAME} "QUIGameEntry" "dev")
#add_module_dependency(${PROJ_NAME} "QUIMemoryUtils" "dev")

if (WEB)
    SET(CMAKE_EXECUTABLE_SUFFIX ".html")
endif()

if (SHARED_LIB)
    make_shared_library(${PROJ_NAME})
else ()
    build_module(${PROJ_NAME} ${BUILD_TYPE})
endif ()

link_module_dependencies(${PROJ_NAME})

if (IOS)
    SET_TARGET_PROPERTIES(${PROJ_NAME} PROPERTIES MACOSX_BUNDLE_INFO_PLIST "${CMAKE_CURRENT_LIST_DIR}/SDLDemo.plist")
    SET_TARGET_PROPERTIES(${PROJ_NAME} PROPERTIES XCODE_ATTRIBUTE_TARGETED_DEVICE_FAMILY "1,2")
    SET_TARGET_PROPERTIES(${PROJ_NAME} PROPERTIES XCODE_ATTRIBUTE_GCC_GENERATE_DEBUGGING_SYMBOLS "Yes")
    SET (CMAKE_XCODE_ATTRIBUTE_CLANG_CXX_LANGUAGE_STANDARD "c++0x")
    SET (CMAKE_XCODE_ATTRIBUTE_CLANG_CXX_LIBRARY "libc++")
endif ()
